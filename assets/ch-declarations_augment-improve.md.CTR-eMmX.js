import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.D53w8jfx.js";const o=JSON.parse('{"title":"Item 71: Use Module Augmentation to Improve Types","description":"","frontmatter":{},"headers":[],"relativePath":"ch-declarations/augment-improve.md","filePath":"ch-declarations/augment-improve.md"}'),p={name:"ch-declarations/augment-improve.md"};function h(e,s,l,k,r,d){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="item-71-use-module-augmentation-to-improve-types" tabindex="-1">Item 71: Use Module Augmentation to Improve Types <a class="header-anchor" href="#item-71-use-module-augmentation-to-improve-types" aria-label="Permalink to &quot;Item 71: Use Module Augmentation to Improve Types&quot;">â€‹</a></h1><h2 id="è¦ç‚¹" tabindex="-1">è¦ç‚¹ <a class="header-anchor" href="#è¦ç‚¹" aria-label="Permalink to &quot;è¦ç‚¹&quot;">â€‹</a></h2><ul><li>Use declaration merging to improve existing APIs or disallow problematic constructs.</li><li>Use <code>void</code> or error string returns to &quot;knock out&quot; methods and mark them <code>@deprecated</code>.</li><li>Remember that overloads only apply at the type level. Don&#39;t make the types diverge from reality.</li><li>ä½¿ç”¨å£°æ˜åˆå¹¶æ¥æ”¹è¿›ç°æœ‰çš„ API æˆ–ç¦æ­¢é—®é¢˜æ„é€ ã€‚</li><li>ä½¿ç”¨ <code>void</code> æˆ–é”™è¯¯å­—ç¬¦ä¸²è¿”å›å€¼æ¥&quot;åºŸå¼ƒ&quot;æ–¹æ³•ï¼Œå¹¶æ ‡è®°ä¸º <code>@deprecated</code>ã€‚</li><li>è®°ä½ï¼Œé‡è½½åªé€‚ç”¨äºç±»å‹å±‚é¢ã€‚ä¸è¦è®©ç±»å‹ä¸å®é™…æƒ…å†µä¸ä¸€è‡´ã€‚</li></ul><h2 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡" aria-label="Permalink to &quot;æ­£æ–‡&quot;">â€‹</a></h2><p>JavaScript æœ‰ä¸€äº›è‘—åçš„&quot;ç³Ÿç³•éƒ¨åˆ†&quot;ï¼Œæ¯”å¦‚éšå¼å…¨å±€å˜é‡å’Œç±»å‹å¼ºåˆ¶è½¬æ¢ã€‚å…¶ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯ 90 å¹´ä»£ä¸­æœŸé»„é‡‘æ—¶ä»£åšå‡ºçš„è®¾è®¡å†³ç­–ï¼Œäº‹å®è¯æ˜è¿™äº›å†³ç­–æéš¾é€†è½¬ã€‚</p><p>TypeScript ä¹Ÿæœ‰è‡ªå·±çš„ä¸€äº›å†å²é—ç•™é—®é¢˜ã€‚å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ <code>JSON.parse</code> çš„ç±»å‹å£°æ˜ï¼Œå®ƒè¿”å› <code>any</code>ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> apiResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/CYUwxgNghgTiAEEQBd5QA4EsBKIDO6A9gHZ4gBc8eyMmxA5gNwBQQA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><hr><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(apiResponse)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cacheExpirationTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.lastModified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3600</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//    ^? const cacheExpirationTime: any</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/CYUwxgNghgTiAEEQBd5QA4EsBKIDO6A9gHZ4gBc8eyMmxA5gNwBQYJ18cB7CAvPACkAygHkAcgDp0sMgAoMOfEVIgAlCzalUYKGAAWIAKIAPLDCjJMJACqYAtn05KeE6NQCyhYJgBmmEMDwANTwAMwAbAAMkSwA9LHwifAAegD88JocOvpGppjmljb2FGjEAJ7MQA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>å¦‚æœä½ æ²¡æœ‰ç»™ <code>response</code> æŒ‡å®šç±»å‹ï¼Œå®ƒä¼šæ‚„æ— å£°æ¯åœ°åœ¨ä½ çš„ä»£ç ä¸­ä¼ æ’­ <code>any</code> ç±»å‹ã€‚æ­£å¦‚ç¬¬ 5 æ¡æ‰€è§£é‡Šçš„ï¼Œè¿™ä¼šç ´åç±»å‹å®‰å…¨ï¼Œé˜»ç¢è¯­è¨€æœåŠ¡ï¼Œå¹¶è®©ä½ åœ¨ TypeScript ä¸­è·å¾—ç³Ÿç³•çš„ä½“éªŒã€‚</p><p>å¦‚æœ <code>JSON.parse</code> è¿”å› <code>unknown</code> ä¼šæ›´å¥½ï¼Œæ­£å¦‚ç¬¬ 46 æ¡æ‰€è§£é‡Šçš„ï¼Œ<code>unknown</code> å¯ä»¥ä½œä¸º <code>any</code> çš„ç±»å‹å®‰å…¨æ›¿ä»£å“ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆä¸è¿™æ ·åšå‘¢ï¼Ÿè¿™æ˜¯å› ä¸º <code>unknown</code> ç±»å‹ç›´åˆ° 2018 å¹´ 7 æœˆå‘å¸ƒçš„ TypeScript 3.0 æ‰è¢«å¼•å…¥ã€‚åœ¨æ­¤ä¹‹å‰å·²ç»ç¼–å†™äº†å¤§é‡çš„ TypeScript ä»£ç ï¼Œæ”¹å˜ <code>JSON.parse</code> çš„è¿”å›ç±»å‹ä¼šé€ æˆæå¤§çš„ç ´åæ€§å½±å“ã€‚æ‰€ä»¥ TypeScript å›¢é˜Ÿå‘å®ç”¨æ€§åšå‡ºäº†è®©æ­¥ã€‚æœªæ¥çš„ä»£ç ä¼šç¨å¾®ä¸é‚£ä¹ˆå®‰å…¨ï¼Œä½†ç°æœ‰ä»£ç ä¸ä¼šç ´åã€‚</p><p>ä½†ä»…ä»…å› ä¸º TypeScript å›¢é˜Ÿå†³å®šä¿ç•™è¿™ä¸ªç±»å‹ç­¾åï¼Œå¹¶ä¸æ„å‘³ç€ä½ ä¹Ÿå¿…é¡»è¿™æ ·åšã€‚å›æƒ³ç¬¬ 13 æ¡ï¼Œæ¥å£æœ‰ä¸€ä¸ªç±»å‹åˆ«åæ‰€æ²¡æœ‰çš„ç‰¹æ®Šèƒ½åŠ›ï¼šå®ƒä»¬å‚ä¸&quot;å£°æ˜åˆå¹¶&quot;ï¼Œå³åŒä¸€æ¥å£çš„é‡å¤å®šä¹‰ä¼šè¢«åˆå¹¶å½¢æˆæœ€ç»ˆç»“æœã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥æ”¹å˜ <code>JSON.parse</code> çš„ç±»å‹ç­¾åã€‚ä»¥ä¸‹æ˜¯å®ƒçš„æ ·å­ï¼ˆåœ¨ <code>lib.es5.d.ts</code> ä¸­ï¼‰ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    reviver</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JSON</span></span></code></pre></div><p>æˆ‘ä»¬å…³å¿ƒçš„æ˜¯æ¥å£ã€‚å¦‚æœä½ åœ¨é¡¹ç›®çš„ç±»å‹å£°æ˜æ–‡ä»¶ä¸­å®šä¹‰è‡ªå·±çš„ <code>JSON</code> æ¥å£ï¼ŒTypeScript ä¼šå°†å…¶ä¸åº“å£°æ˜åˆå¹¶ã€‚</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// declarations/safe-json.d.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    reviver</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unknown</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/CYUwxgNghgTiAEEQBd5QA4EsBKIDO6A9gHZ4gBc8eyMmxA5gNwBQA9K-KJLFMpiXlZ4oAMxABaAFZ4SAOmCzkeZnWQgYIqGAQApAMoB5AHLwA3s3jx0sMgAoLl+GoAeyStVoMANA8twAbpj+6gD8lLbIABaYeJRQxACeXvAA1iAJ7jR09Mn+UBAArhRoiQCU8AC8AHwlCQ6llAXEKcSEAO7ELAC+zEA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>æ³¨æ„è¿”å›ç±»å‹çš„æ”¹å˜ã€‚ç»“æœç±»ä¼¼äº TypeScript å‡½æ•°é‡è½½ï¼ˆç¬¬ 52 æ¡ï¼‰ã€‚ç”±äºåº“åœ¨æˆ‘ä»¬çš„ä»£ç ä¹‹å‰åŠ è½½ï¼Œæˆ‘ä»¬çš„é‡è½½æ€»æ˜¯ä¼šè·èƒœã€‚ç»“æœæ˜¯ <code>JSON.parse</code> ç°åœ¨è¿”å› <code>unknown</code>ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(apiResponse)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//    ^? const response: unknown</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cacheExpirationTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.lastModified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3600</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//                          ~~~~~~~~ response is of type &#39;unknown&#39;.</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/CYUwxgNghgTiAEEQBd5QA4EsBKIDO6A9gHZ4gBc8eyMmxA5gNwBQYJ18cB7CAvPACkAygHkAcgDp0sMgAoMOfEVIgAlCwD0G+DvgA9APzw2pVF2VlKAV2IBrYoQDuxVu1RgoYABYgAogA8sGChkTBIAFUwAWz5OJR4JaGoAWUJgTAAzTBBgeABqeABmADYABlLNbV1qmtq6gD9Gpsa47hV4TDx4Qgz4ZABPdAQAcht7J2JhiWYgA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>ä½¿ç”¨å®ƒéœ€è¦ç±»å‹æ–­è¨€ï¼Œè¿™æ­£æ˜¯ä½ æƒ³è¦çš„ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApiResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  lastModified</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(apiResponse) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApiResponse</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cacheExpirationTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.lastModified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3600</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // ok</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//    ^? const cacheExpirationTime: number</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/CYUwxgNghgTiAEEQBd5QA4EsBKIDO6A9gHZ4gBc8eyMmxA5gNwBQdyIMAZlGAgIJZcBEmXgBvZvERRqAWULBMnTCGCViAVwC2AIw4sAvszAjUcYaQQBeeACkAygHkAcgDp0sMgAoMOfEUsASjQ8eAE-CzIWE1JUMB4ACxAAUQAPLBgoZEwSABVMLWt4cwCyV2g5BSUVYHgAangAZgA2AAZWxikAei74QgBrZh6pKQA9AH54GOopxJT0zEzsvIKKeE1dDmYgA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>ä½ å¯ä»¥å¯¹ fetch API çš„ <code>Response.prototype.json()</code> åšç±»ä¼¼çš„äº‹æƒ…ï¼Œå®ƒä¹Ÿè¿”å› <code>any</code>ã€‚ä»¥ä¸‹æ˜¯ä¿®å¤æ–¹æ¡ˆï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// declarations/safe-response.d.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unknown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/CYUwxgNghgTiAEEQBd5QA4EsBKIDO6A9gHZ4gBc8eyMmxA5gNwBQA9K-KJLFMpiXlZ4oAMxABaOAQEgAdMFnI8zOshAwRUMAgBChYAE94Ab2bx4AKzwkAFAEpKABRiEAtpjIAeAK7EA1sSEAO7EAHwsAL7MQA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>è¿™äº›æ”¹å˜éƒ½æ˜¯æ˜æ˜¾çš„èƒœåˆ©ã€‚ä½†ç”±äºä½ åªåšå½±å“è‡ªå·±ä»£ç çš„æ”¹å˜ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªç”±åœ°åšå‡ºæ›´æœ‰äº‰è®®çš„æ”¹å˜ï¼Œè¿™äº›æ”¹å˜åœ¨æ›´å¹¿æ³›çš„ TypeScript ç”Ÿæ€ç³»ç»Ÿä¸­æ°¸è¿œä¸ä¼šè¢«æ¥å—ã€‚</p><p>ä¾‹å¦‚ï¼Œè¯­è¨€è§„èŒƒçš„ä¸€éƒ¨åˆ†æ˜¯ <code>Set</code> æ„é€ å‡½æ•°å¯ä»¥æ¥å—å­—ç¬¦ä¸²ã€‚è¿™ä¼šå¯¼è‡´å¯èƒ½ä¸æ˜¯ä½ æœŸæœ›çš„ç»“æœï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;abc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div><p>å¦‚æœä½ çš„æ„å›¾æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å« <code>&#39;abc&#39;</code> çš„å•å…ƒç´ é›†åˆï¼Œé‚£ä¹ˆè¿™å¯èƒ½ä¼šåœ¨ä½ çš„ä»£ç ä¸­å¼•å…¥é”™è¯¯ã€‚ç”±äºä¸¤è€…çš„ç±»å‹éƒ½æ˜¯ <code>Set&lt;string&gt;</code>ï¼Œè€Œä¸”è¿™æ˜¯ JavaScript çš„å·¥ä½œæ–¹å¼ï¼ŒTypeScript æ— æ³•å¸®ä½ æ•è·è¿™ä¸ªé”™è¯¯ã€‚</p><p>ä½†æ²¡æœ‰ç†ç”±ä½ ä¸èƒ½åœ¨è‡ªå·±çš„ä»£ç ä¸­ç¦æ­¢ç”¨å­—ç¬¦ä¸²è°ƒç”¨ <code>Set</code> æ„é€ å‡½æ•°ã€‚è¿™æ¯”æ”¹å˜ <code>JSON.parse</code> çš„è¿”å›ç±»å‹ç¨å¾®å›°éš¾ä¸€äº›ï¼Œä½†éƒ½å½’ç»“ä¸ºå£°æ˜åˆå¹¶ã€‚</p><p>ä»¥ä¸‹æ˜¯æ¥è‡ª <code>lib.es2015.collections.d.ts</code> çš„ <code>Set</code> å£°æ˜ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SetConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">values</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> readonly</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> prototype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Set</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SetConstructor</span></span></code></pre></div><p>åœ¨ <code>lib.es2015.iterable.d.ts</code> ä¸­è¿˜æœ‰æ„é€ å‡½æ•°çš„é‡è½½ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SetConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">iterable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Iterable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/CYUwxgNghgTiAEEQBd5QA4EsBKIDO6A9gHZ4gBc8eyMmxA5gNwBQdyIMAZlGAgMooAwiWowArmGSEY8AN7N48YiADu8ADwAVAHwAKTOxhQARkgD8lAJKGTSLdvgAfJWIgQAlJQHJ7LAL7MQA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>è¿™æ˜¯æˆ‘ä»¬æƒ³è¦&quot;åºŸå¼ƒ&quot;çš„é‡è½½ã€‚ä»¥ä¸‹æ˜¯æ–¹æ³•ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// declarations/ban-set-string-constructor.d.ts:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SetConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/PTAEBMFMGMBsEMBO8AuBLA9gOwM7AEbxYC0OkKpKiaWA5sdNjlQK7QoaIB04XKOALgBQNFJEQAzeNEigAyuQDCTVu06gA3kNCgskAO6gAFM0QDQpmrQCU5gG4Y04ANxCAvkKA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>æœ‰äº†è¿™ä¸ªå£°æ˜ï¼Œç”¨å­—ç¬¦ä¸²æ„é€  <code>Set</code> ä»ç„¶ä¸ä¼šäº§ç”Ÿç±»å‹é”™è¯¯ã€‚ä½†å®ƒä¼šè¿”å› <code>void</code>ï¼Œæ‰€ä»¥å°è¯•å¯¹ç»“æœåšä»»ä½•äº‹æƒ…éƒ½ä¼šç»™ä½ ä¸€ä¸ªæç¤ºï¼Œè¡¨æ˜æœ‰ä»€ä¹ˆåœ°æ–¹ä¸å¯¹åŠ²ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;abc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//    ^? const s: void</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(s.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;abc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//            ~~~ Property &#39;has&#39; does not exist on type &#39;void&#39;.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> otherSet</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//    ~~~~~~~~ Type &#39;void&#39; is not assignable to type &#39;Set&lt;string&gt;&#39;.</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/MYewdgzgLgBBMF4ZgKYHcYGUVQBQHIBDAI2HwEoBuAKAHpaZGYA9AfhlElggC4YA3EAEsAJtU4QQAGxQA6KSADmuCLIAWhCARJlyVOgyZGjAPzMwACgCcQABxRWoATxj4NEfDBEgU8MCFgUAA8haBhwGGd7V0FRfFlxcDCAtQdsKD50gB5oKyEwRQA+RDgaelMzSvMAFSdo-FiRT1DkAJhNCCFFMBIZSJBIupRXbNz8ovjqIA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>ä¸ºäº†ç»™ç”¨æˆ·æ›´å¼ºçš„æç¤ºï¼Œä½ å¯ä»¥è®© <code>Set</code> æ„é€ å‡½æ•°è¿”å›åŒ…å«é”™è¯¯çš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€‚ä½ è¿˜å¯ä»¥ç”¨ <code>@deprecated</code> æ ‡è®°è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œè®©å®ƒåœ¨ç”¨æˆ·çš„ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºä¸ºåˆ é™¤çº¿ï¼ˆç¬¬ 68 æ¡ï¼‰ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SetConstructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@deprecated</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Error! new Set(string) is banned.&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;abc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//    ^? const s: &quot;Error! new Set(string) is banned.&quot;</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/JYOwLgpgTgZghgYwgAgMoTAYQPYgM5hQCuCY2UyA3gFDLID0AVI8gAIAmEADlBAnJHbJG9WshAQA7sgAUBKAC5k80AHMAlEoDkAUShRyAQnFS0GOYTXrkwPMgBGcEBPYA6LQG5qAX2rUEuATKyAC8JtLoYDJacPYIWupe9PR0dAB6APzIAfhgykoARHoGUMYSEeYqIBo2do7OEG4F1EA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>è¿™äº›éƒ½ä¸æ˜¯å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼šå¦‚æœæˆ‘ä»¬åœ¨æ„é€  <code>Set</code> æ—¶äº§ç”Ÿç±»å‹é”™è¯¯ä¼šæ›´å¥½ï¼Œè€Œä¸æ˜¯äº§ç”Ÿä¸€ä¸ªä¸å¯ç”¨çš„ç±»å‹ã€‚ä½†è¿™åœ¨ TypeScript ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œè¿™å°±æ˜¯è¿™ç§æŠ€æœ¯çš„å®é™…åº”ç”¨é€šå¸¸çœ‹èµ·æ¥çš„æ ·å­ã€‚</p><p>å½“ç„¶ï¼Œèƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›éœ€è¦æ³¨æ„çš„äº‹é¡¹ï¼š</p><ul><li>ä¸æ‰€æœ‰ç±»å‹çº§æ„é€ ä¸€æ ·ï¼Œè¿™åªå½±å“ç±»å‹æ£€æŸ¥ã€‚<code>JSON.parse</code> å’Œ <code>Set</code> æ„é€ å‡½æ•°çš„è¿è¡Œæ—¶è¡Œä¸ºä¸ä¼šå—åˆ°å½±å“ï¼Œæ— è®ºæ˜¯åœ¨ä½ è‡ªå·±çš„ä»£ç ä¸­è¿˜æ˜¯åœ¨åº“ä»£ç ä¸­ã€‚</li><li>è¿™ç§æŠ€æœ¯æœ€å¥½ç”¨äºä½¿å†…ç½®ç±»å‹æ›´ä¸¥æ ¼å’Œæ›´ç²¾ç¡®ï¼Œæˆ–è€…ç¦æ­¢æŸäº›äº‹æƒ…ã€‚å¦‚æœä½ æ·»åŠ ä¸åæ˜ è¿è¡Œæ—¶ç°å®çš„å£°æ˜ï¼Œä½ å¯èƒ½ä¼šåˆ›å»ºä¸€ä¸ªä»¤äººå›°æƒ‘çš„æƒ…å†µã€‚æ­£å¦‚ç¬¬ 40 æ¡æ‰€è§£é‡Šçš„ï¼Œé”™è¯¯çš„ç±»å‹å¯èƒ½æ¯”æ²¡æœ‰ç±»å‹æ›´ç³Ÿç³•ã€‚</li><li>æˆ‘ä»¬é€šè¿‡è®© <code>Set</code> æ„é€ å‡½æ•°è¿”å› <code>void</code> æˆ–é”™è¯¯å­—ç¬¦ä¸²æ¥&quot;åºŸå¼ƒ&quot;å®ƒã€‚ä½†å¦‚æœä½ æƒ³ç¦æ­¢ä¸€ä¸ªå·²ç»è¿”å› <code>void</code> çš„å‡½æ•°æˆ–æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•å°±ä¸ä¼šé‚£ä¹ˆå¥½ç”¨ã€‚</li></ul><p>æˆ‘ä»¬ä½¿ç”¨å£°æ˜åˆå¹¶æ¥æ”¹è¿›å†…ç½®ç±»å‹ï¼Œä½†åŒæ ·çš„æŠ€æœ¯ä¹Ÿå¯ä»¥ç”¨äºç¬¬ä¸‰æ–¹ <code>@types</code> å’Œæ†ç»‘çš„ç±»å‹å£°æ˜ã€‚ä½ å¯ä»¥åœ¨ <code>ts-reset</code> npm åŒ…ä¸­æ‰¾åˆ°å¯¹å†…ç½®ç±»å‹çš„æ”¹è¿›é›†åˆã€‚</p><h2 id="è¦ç‚¹å›é¡¾" tabindex="-1">è¦ç‚¹å›é¡¾ <a class="header-anchor" href="#è¦ç‚¹å›é¡¾" aria-label="Permalink to &quot;è¦ç‚¹å›é¡¾&quot;">â€‹</a></h2><ul><li>ä½¿ç”¨å£°æ˜åˆå¹¶æ¥æ”¹è¿›ç°æœ‰çš„ API æˆ–ç¦æ­¢é—®é¢˜æ„é€ ã€‚</li><li>ä½¿ç”¨ <code>void</code> æˆ–é”™è¯¯å­—ç¬¦ä¸²è¿”å›å€¼æ¥&quot;åºŸå¼ƒ&quot;æ–¹æ³•ï¼Œå¹¶æ ‡è®°ä¸º <code>@deprecated</code>ã€‚</li><li>è®°ä½ï¼Œé‡è½½åªé€‚ç”¨äºç±»å‹å±‚é¢ã€‚ä¸è¦è®©ç±»å‹ä¸å®é™…æƒ…å†µä¸ä¸€è‡´ã€‚</li></ul>`,53)]))}const E=i(p,[["render",h]]);export{o as __pageData,E as default};
