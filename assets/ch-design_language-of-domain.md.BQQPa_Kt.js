import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.D53w8jfx.js";const d=JSON.parse('{"title":"第 41 条：使用相关领域语言为类型命名","description":"","frontmatter":{},"headers":[],"relativePath":"ch-design/language-of-domain.md","filePath":"ch-design/language-of-domain.md"}'),h={name:"ch-design/language-of-domain.md"};function p(k,s,t,e,r,F){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="第-41-条-使用相关领域语言为类型命名" tabindex="-1">第 41 条：使用相关领域语言为类型命名 <a class="header-anchor" href="#第-41-条-使用相关领域语言为类型命名" aria-label="Permalink to &quot;第 41 条：使用相关领域语言为类型命名&quot;">​</a></h1><h2 id="要点" tabindex="-1">要点 <a class="header-anchor" href="#要点" aria-label="Permalink to &quot;要点&quot;">​</a></h2><ul><li>尽量复用问题领域的名称，提升代码可读性和抽象层次，确保准确使用领域词汇。</li><li>不要用不同名字表示同一件事，名字的区分必须有意义。</li><li>避免用 “Info” 或 “Entity” 这样模糊的名字，给类型命名时按它们的本质来，不要只看它们的结构。</li></ul><div class="note custom-block github-alert"><p class="custom-block-title">Phil Karlton</p><p>计算机科学中只有两个难题：缓存失效和给东西命名。</p></div><h2 id="正文" tabindex="-1">正文 <a class="header-anchor" href="#正文" aria-label="Permalink to &quot;正文&quot;">​</a></h2><p>这本书讲了很多关于类型的结构和它们值域中的值，但对你给类型取什么名字讲得比较少。但这其实是类型设计中很重要的一部分。选对类型、属性和变量名，能让代码意图更清晰，提升代码和类型的抽象层次；选不好则会让代码晦涩难懂，导致错误的理解。</p><p>比如你在构建一个动物数据库，你定义了一个接口来表示动物：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  endangered</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  habitat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> leopard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Snow Leopard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  endangered: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  habitat: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tundra&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/JYOwLgpgTgZghgYwgAgIImAWzgG2QbwChlkQ5MIAuZAZzClAHMBuY5CEAEzhEegk7UARgHsROCD1YkAFnCHAwcMNToNerAL6FCCESDrIJIgA5wogtBmx4AvATZkK1AOQBlECIDuyADIRTc04XABo2Dm5efkt4HBoIMNl5RWVXMABXLig4UMJNViA" target="_blank" rel="noreferrer">💻 playground</a></p><p>这里存在一些问题：</p><ul><li>name 是个非常笼统的词，你到底期待存什么名字？学名？俗名？</li><li>endangered（濒危）是布尔值，也不够明确。比如动物灭绝了怎么办？这里的意思是“濒危及更糟”的状态吗？还是字面上的“濒危”？</li><li>habitat（栖息地）字段也很模糊，不仅因为它是 string 类型过于宽泛（参见第 35 条），还因为“栖息地”具体指什么不清楚。</li><li>变量名是 leopard，但 name 属性的值是“Snow Leopard”（雪豹），这两个名字的区别有意义吗？</li></ul><p>下面是一个更明确的类型声明和对应的值示例：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  commonName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  genus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  species</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConservationStatus</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  climates</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> KoppenClimate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConservationStatus</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;EX&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;EW&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;CR&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;EN&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;VU&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;NT&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;LC&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> KoppenClimate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Af&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Am&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;As&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Aw&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;BSh&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;BSk&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;BWh&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;BWk&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Cfa&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Cfb&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Cfc&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Csa&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Csb&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Csc&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Cwa&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Cwb&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Cwc&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dfa&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dfb&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dfc&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dfd&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dsa&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dsb&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dsc&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dwa&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dwb&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dwc&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Dwd&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;EF&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ET&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> snowLeopard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Animal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  commonName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Snow Leopard&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  genus: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Panthera&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  species: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Uncia&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;VU&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vulnerable</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  climates: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ET&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;EF&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Dfd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// alpine or subalpine</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/JYOwLgpgTgZghgYwgAgIImAWzgG2QbwChlkEB7TTMkAOTkwgC5kBnMKUAcwG5jlOIIAK4tmbDiB58WABwgJgEUa3ZdeJNnDAjmAYWotoANy3BqAZTBaR60jixalzANJkZckLvvZIAbQC6vAC+hGAAnnLI+iCGUCZgZiCW1izIALzIAOQAogAamcgAPlnZAOoFxZm6AEoVJTR1mQBqAKqNNAAqjQAyupm84ZGu7oJeDpDpRXyZqDCNqJjzLPMA7hXTAELmABaNWwDWe6W7RVkbpYdTJFXwjbowAEZ3MAh3LHBvT6dVLK-fuisPv8Vl9KgC-oVpgARW7fGGgrIwiGImAAE3W1yh70aWIRmSxyPxgJxIJJhKhK3RVxKADFGtkurxyDEwKwQGQVt0IG44FBUcx0A48BkiCRyJRqHQGMxMuZ2StkFyeXzMgAaPgCYTKTIABTg4G20A+6o0cgUTiyLRACmN0is2m1rTVJAA9C7kEYhDgQEaHjgIHwEN5HMpfDkuqrac78WjMv5I8g3chcDJQCgyFBWEIHim04QgrwgA" target="_blank" rel="noreferrer">💻 playground</a></p><p>这带来了很多改进：</p><ul><li>把 name 换成了更具体的字段：commonName（通用名）、genus（属名）、species（种名）。</li><li>把 endangered（濒危）改成了 status（状态），用的是来自 IUCN 的 ConservationStatus 类型，基于标准分类系统。</li><li>把 habitat（栖息地）改成了 climates（气候类型），使用了另一种标准分类——柯本气候分类法（Köppen climate classification）。</li></ul><p>如果你对第一版的字段含义不清楚，只能去找当初写代码的人问，可惜他们很可能已经离职或者不记得了。更糟的是，你可能用 git blame 找写这烂代码的人，结果发现那个人竟然是你自己！</p><p>第二版就好多了。如果想了解柯本气候分类法或保护状态的具体含义，网上有大量资源可查。</p><p>每个领域都有自己的专业术语。别自己瞎起名字，尽量沿用问题领域的术语。这些词汇往往经过多年甚至几百年磨炼，行业内的人都很熟悉。用它们能帮助你更好地和用户沟通，让类型更清晰。</p><p>但要注意准确使用领域词汇：如果你把领域里的词拿来用，却赋予不同含义，比自己发明词还让人困惑。</p><p>同样的原则也适用于函数参数名、元组标签、索引类型标签等。</p><p>给类型、属性、变量命名时，还要记住这些规则：</p><ul><li>区分要有意义。写文章说话时反复用同一个词会乏味，于是用同义词来丰富语言。但代码正好相反，如果用不同词，确保它们表示不同概念；否则应该用同一个词。</li><li>避免用模糊无意义的名字，比如 “data”、“info”、“thing”、“item”、“object” 或流行的 “entity”。如果在你的领域 “Entity” 有明确含义，那没问题。但如果你用它只是因为懒得想更有意义的名字，迟早会出问题：项目里可能出现多个不同的 “Entity”，你能记住哪个是 Item 哪个是 Entity 吗？</li><li>给东西命名时，按它们的本质命名，而不是它们包含什么或怎么计算。比如用 Directory 比 INodeList 更有意义，因为它让你能把目录当成一个概念来看，而不是实现细节。好名字能提高抽象层次，减少意外冲突风险。</li></ul><h2 id="关键点总结" tabindex="-1">关键点总结 <a class="header-anchor" href="#关键点总结" aria-label="Permalink to &quot;关键点总结&quot;">​</a></h2><ul><li>尽量复用问题领域的名称，提升代码可读性和抽象层次，确保准确使用领域词汇。</li><li>不要用不同名字表示同一件事，名字的区分必须有意义。</li><li>避免用 “Info” 或 “Entity” 这样模糊的名字，给类型命名时按它们的本质来，不要只看它们的结构。</li></ul>`,25)]))}const E=i(h,[["render",p]]);export{d as __pageData,E as default};
