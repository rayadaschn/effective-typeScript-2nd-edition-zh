import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.D53w8jfx.js";const o=JSON.parse('{"title":"Item 70: Mirror Types to Sever Dependencies","description":"","frontmatter":{},"headers":[],"relativePath":"ch-declarations/mirror-types-for-deps.md","filePath":"ch-declarations/mirror-types-for-deps.md"}'),e={name:"ch-declarations/mirror-types-for-deps.md"};function p(h,s,l,k,r,d){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="item-70-mirror-types-to-sever-dependencies" tabindex="-1">Item 70: Mirror Types to Sever Dependencies <a class="header-anchor" href="#item-70-mirror-types-to-sever-dependencies" aria-label="Permalink to &quot;Item 70: Mirror Types to Sever Dependencies&quot;">â€‹</a></h1><h2 id="è¦ç‚¹" tabindex="-1">è¦ç‚¹ <a class="header-anchor" href="#è¦ç‚¹" aria-label="Permalink to &quot;è¦ç‚¹&quot;">â€‹</a></h2><ul><li>Avoid transitive type dependencies in published npm modules.</li><li>Use structural typing to sever dependencies that are nonessential.</li><li>Don&#39;t force JavaScript users to depend on <code>@types</code>. Don&#39;t force web developers to depend on Node.js.</li><li>é¿å…åœ¨å‘å¸ƒçš„ npm æ¨¡å—ä¸­å‡ºç°ä¼ é€’ç±»å‹ä¾èµ–ã€‚</li><li>ä½¿ç”¨ç»“æ„åŒ–ç±»å‹æ¥åˆ‡æ–­éå¿…è¦çš„ä¾èµ–ã€‚</li><li>ä¸è¦å¼ºè¿« JavaScript ç”¨æˆ·ä¾èµ– <code>@types</code>ï¼Œä¹Ÿä¸è¦å¼ºè¿« web å¼€å‘è€…ä¾èµ– Node.jsã€‚</li></ul><h2 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡" aria-label="Permalink to &quot;æ­£æ–‡&quot;">â€‹</a></h2><p>å‡è®¾ä½ ç¼–å†™äº†ä¸€ä¸ªç”¨äºè§£æ CSV æ–‡ä»¶çš„åº“ã€‚å®ƒçš„ API å¾ˆç®€å•ï¼šä½ ä¼ å…¥ CSV æ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªå°†åˆ—åæ˜ å°„åˆ°å€¼çš„å¯¹è±¡åˆ—è¡¨ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ä½ çš„ Node.js ç”¨æˆ·ï¼Œä½ å…è®¸å†…å®¹æ—¢å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ Node.js Bufferï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// parse-csv.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseCSV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">contents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { [</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }[] {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> contents </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // It&#39;s a buffer</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseCSV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(contents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/PTAEAcEMCcGcFMC0BjWA3AdAF1gKAJYC24A9tFqAN4BCArgGb3zQC+o90JhoA5AHYkAJvABcAIwZNoPANy5c9Wn2RZ8JPhBgIAwgGUAagApk6rPD44RoWFmj4+Ac1AAfUHUbMAlFcoBtEwA2tIR8VjZ2jgC6Ybb2Diy+kaBUuMn49KCGWACe4PAkGSYW5jigALwVvCRiAFbwKjyeKcnJIKAAklg8sKCQoBIe0Kkt0PBYtNAaUHDwekZFZhaw2CS6sY6GPLRY9AAcjZ5yySzDbdoA8gCyAAoASgCiurrDo+OToIlHoG33AHIAIrgTrggA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>Buffer çš„ç±»å‹å®šä¹‰æ¥è‡ª Node.js ç±»å‹å£°æ˜ï¼Œä½ å¿…é¡»å®‰è£…å®ƒï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @types/node</span></span></code></pre></div><p>è¿™é‡Œæˆ‘ä»¬éµå¾ªäº†ç¬¬ 65 æ¡çš„å»ºè®®ï¼Œå°† <code>@types</code> ä½œä¸ºå¼€å‘ä¾èµ–è€Œä¸æ˜¯ç”Ÿäº§ä¾èµ–ã€‚</p><p>å½“ä½ å‘å¸ƒä½ çš„ CSV è§£æåº“æ—¶ï¼Œä½ ä½¿ç”¨ <code>--declaration</code> ç”Ÿæˆç±»å‹å£°æ˜å¹¶å°†å…¶æ‰“åŒ…ã€‚ç”Ÿæˆçš„ <code>.d.ts</code> æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// parse-csv.d.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseCSV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">contents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}[]</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/PTAEAcEMCcGcFMC0BjWA3AdAEwwF1gFACWAtuAPbS6gDeoAQgK4Bmz80oAvqM9OSaADkAO3JZ4ALgBGLNtEEBuAvAAeFKqHHIANjHg9Gw5LiLlhEGAgDCAZQBqACmRnc8YfgmhYuaEWEBzUAAfBll2AEpPGgJQWNAAbWdtRhJhT29fAIBddJ8-fyVOeKylIA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>å¦‚æœä½ é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Œä½ çš„åº“çš„ JavaScript ç”¨æˆ·ä¼šå¾ˆé«˜å…´ï¼Œä½† TypeScript web å¼€å‘è€…ä¸ä¼šã€‚ä½ ä¼šæ”¶åˆ°ä»–ä»¬çš„æŠ•è¯‰ï¼Œè¯´ä»–ä»¬ä»ä½ çš„åº“ä¸­å¾—åˆ°äº†é”™è¯¯ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Cannot find module &#39;node:buffer&#39; or its corresponding type declarations.</span></span></code></pre></div><p>å› ä¸ºæˆ‘ä»¬å°† <code>@types/node</code> ä½œä¸º devDependencyï¼Œæ‰€ä»¥å®ƒä¸ä¼šéšæˆ‘ä»¬çš„åŒ…ä¸€èµ·å®‰è£…ï¼Œå³ä½¿æˆ‘ä»¬çš„ç±»å‹ï¼ˆä½œä¸ºæˆ‘ä»¬åŒ…çš„ä¸€éƒ¨åˆ†ï¼‰ä¾èµ–äºå®ƒã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å°† <code>@types/node</code> ä½œä¸ºç”Ÿäº§ä¾èµ–å—ï¼Ÿè¿™ä¼šè®©é”™è¯¯æ¶ˆå¤±ï¼Œä½†ç°åœ¨ä½ å¯èƒ½ä¼šæ”¶åˆ°å¦ä¸€ç»„æŠ•è¯‰ï¼š</p><ul><li>JavaScript å¼€å‘è€…ä¼šæƒ³çŸ¥é“è¿™äº›ä»–ä»¬ä¾èµ–çš„ <code>@types</code> æ¨¡å—æ˜¯ä»€ä¹ˆã€‚</li><li>TypeScript web å¼€å‘è€…ä¼šæƒ³çŸ¥é“ä¸ºä»€ä¹ˆä»–ä»¬è¦ä¾èµ– Node.jsã€‚</li><li>ä½¿ç”¨ä¸åŒç‰ˆæœ¬ Node.js çš„ TypeScript å¼€å‘è€…ä¼šæƒ³çŸ¥é“ä¸ºä»€ä¹ˆä»–ä»¬æœ‰é‡å¤çš„ç±»å‹å®šä¹‰ã€‚</li></ul><p>è¿™äº›æŠ•è¯‰æ˜¯åˆç†çš„ã€‚Buffer è¡Œä¸ºä¸æ˜¯å¿…éœ€çš„ï¼Œåªå¯¹å·²ç»åœ¨ä½¿ç”¨ Node.js çš„ç”¨æˆ·ç›¸å…³ã€‚è€Œ <code>@types/node</code> ä¸­çš„å£°æ˜åªå¯¹åŒæ—¶ä½¿ç”¨ TypeScript çš„ Node.js ç”¨æˆ·ç›¸å…³ã€‚<code>@types/node</code> åŒ…ä¸å°ï¼ˆè¿‘ 10 ä¸‡è¡Œä»£ç ï¼‰ï¼Œæˆ‘ä»¬çš„åº“åªä½¿ç”¨äº†å…¶ä¸­å¾ˆå°çš„ä¸€éƒ¨åˆ†ã€‚</p><p>TypeScript çš„ç»“æ„åŒ–ç±»å‹ï¼ˆç¬¬ 4 æ¡ï¼‰å¯ä»¥å¸®åŠ©ä½ æ‘†è„±å›°å¢ƒã€‚ä¸å…¶ä½¿ç”¨æ¥è‡ª <code>@types/node</code> çš„ Buffer å£°æ˜ï¼Œä½ å¯ä»¥åªå†™ä½ éœ€è¦çš„æ–¹æ³•å’Œå±æ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæ˜¯ä¸€ä¸ªå¯ä»¥æ¥å—ç¼–ç çš„ toString æ–¹æ³•ï¼š</p><hr><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CsvBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseCSV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  contents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CsvBuffer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { [</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">column</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }[] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgYQGcA3AIQFd1004BvAKDjhggGUYpkBzACmCWwQAJtwD8ALjiEO3AJSTpnJFwDc9AL71QkWHHTkBMBBCRwwmKIWD5WANR6M4glPxiEFM5XAA+BEhSo0enk6AG1BABtyAFskDyUuAF147nVQxKYGJgB6bIIAeQBZAAUAJQBRVlZHKGAYcihTdLUcvPKAOQARDXp6c0trOx4kYAB3OADqKB4AIkiYpABGABp52IAmAB0kYkwIld2I9ZnluBnyGHQAWgAOGdlZFVa4fIBpeiA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>è¿™ä¸ªæ¥å£æ¯”å®Œæ•´çš„æ¥å£çŸ­å¾—å¤šï¼Œä½†å®ƒç¡®å®æ•è·äº†æˆ‘ä»¬å¯¹ Buffer çš„ï¼ˆç®€å•ï¼‰éœ€æ±‚ã€‚åœ¨ Node.js é¡¹ç›®ä¸­ï¼Œç”¨çœŸå®çš„ Buffer è°ƒç”¨ parseCSV ä»ç„¶å¯ä»¥ï¼Œå› ä¸ºç±»å‹æ˜¯å…¼å®¹çš„ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseCSV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;column1,column2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">val1,val2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OK</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgYQGcA3AIQFd1004BvAKDjhggGUYpkBzACmCWwQAJtwD8ALjiEO3AJSTpnJFwDc9AL71QkWHHTkBMBBCRwwmKIWD5WANR6M4glPxiEFM5XAA+BEhSo0enk6AG1BABtyAFskDyUuAF147nVQxKYGJgB6bIIAeQBZAAUAJQBRVlZHKGAYcihTdLUcvPKAOQARDXp6c0trOx4kYAB3OADqKB4AIkiYpABGABp52IAmAB0kYkwIld2I9ZnluBnyGHQAWgAOGdlZFVa4fIBpeiA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>å†æ¬¡æŸ¥çœ‹ CsvBuffer æ¥å£ï¼Œå®ƒæ²¡æœ‰ä»»ä½•ç‰¹å®šäº CSV æ–‡ä»¶çš„å†…å®¹ã€‚ç»™å®ƒä¸€ä¸ªæ›´&quot;ç»“æ„åŒ–&quot;çš„åç§°å¯ä»¥å¼ºåŒ–è¿™ä¸€ç‚¹ï¼š</p><hr><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** Anything convertible to a string with an encoding, e.g. a Node buffer. */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> StringEncodable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/PQKhAIEEDsE8BcAWBLaBzcBjA9tAbgKYBO8yARgDYHjzbgCG4AzvEahgO7JIPTgHQcAE3YAafgDo0EhuABy2IdTIBXAGZriMkMABQBAB4AHbCXCp4xNfUzUAyq3YBRQYvqVqAb13ga2B2zoABQCwuwA-ABczI7oAJTRLIFoANy6AL66QA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><hr><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { parseCSV } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./parse-csv&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;parse CSV in a buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parseCSV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Buffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;column1,column2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">val1,val2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { column1: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;val1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, column2: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;val2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><a href="https://www.typescriptlang.org/play/?ts=5.4.5#code/JYWwDg9gTgLgBAbwEIFcBmaCmUC+c1QQhwDkAdhACaYBcARullCQNwBQoksiYAhlAGdMAYQDKANTwEipAHQB6PoMwBaAMYCAbqzZsYmATAAUJJULhjxcYGTi84DDNhIAaOEYCUcALwA+RGxwcJgAHmCYasaBQXBmIhJGZJgA7nCoTlBGAERqEAA2KCBkAIwuuQVFAEwAOmSavHml9XmVWW5ZKDBoKgAcWR4e0R6yMBAAogCOKA1G0UEA2gjlhSU0pM3FrnDLVWskzZUkOAC6Q+w4HuxAA" target="_blank" rel="noreferrer">ğŸ’» playground</a></p><p>è¿™ä¸ªæµ‹è¯•éªŒè¯äº†ä½ çš„ä»£ç çš„è¿è¡Œæ—¶è¡Œä¸ºå’Œ Node Buffer å¯¹ StringEncodable çš„å¯èµ‹å€¼æ€§ã€‚æµ‹è¯•å¯¼å…¥äº† <code>node:buffer</code>ï¼Œä½†è¿™æ²¡å…³ç³»ï¼Œå› ä¸º <code>@types/node</code> å¯ä»¥æ˜¯ devDependency è€Œä¸å½±å“ä½ çš„åº“çš„ç”¨æˆ·ã€‚</p><p>å¦‚æœä½ çš„ä»£ç å¼€å§‹ä½¿ç”¨ Buffer æ¥å£çš„æ›´å¤šæ–¹æ³•ï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦å°†å®ƒä»¬æ·»åŠ åˆ°ä½ çš„æ¥å£ç‰ˆæœ¬ä¸­ã€‚è¿™å¯èƒ½æ„Ÿè§‰é‡å¤ï¼Œä½†æ­£å¦‚ Go è¯­è¨€ç¤¾åŒºæ‰€è¯´ï¼Œ&quot;ä¸€ç‚¹å¤åˆ¶æ¯”ä¸€ç‚¹ä¾èµ–æ›´å¥½&quot;ã€‚å¦‚æœä½ ä¾èµ–å¦ä¸€ä¸ªåº“ç±»å‹çš„å¤§éƒ¨åˆ†ï¼Œä½ å¯ä»¥é€‰æ‹©é€šè¿‡ä¾›åº”å•†åŒ–ä¾èµ–æ¥æ­£å¼åŒ–è¿™ç§å¤åˆ¶ã€‚</p><p>æ— è®ºå¦‚ä½•ï¼Œé€šè¿‡åˆ‡æ–­ <code>@types</code> ä¾èµ–ï¼Œä½ ä¸º JavaScript å’Œå„ç§ TypeScript å¼€å‘è€…æä¾›äº†è‰¯å¥½çš„ä½“éªŒã€‚å¦‚æœ <code>@types</code> ä¾èµ–æœ‰è‡ªå·±çš„ä¾èµ–ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šåˆ‡æ–­æ•´ä¸ªä¾èµ–æ ‘ï¼Œè¿™å¯¹ç¼–è¯‘å™¨æ€§èƒ½æœ‰å·¨å¤§çš„ç§¯æå½±å“ï¼ˆç¬¬ 78 æ¡ï¼‰ã€‚</p><p>è¿™ç§æŠ€æœ¯ä¹Ÿæœ‰åŠ©äºåˆ‡æ–­å•å…ƒæµ‹è¯•å’Œç”Ÿäº§ç³»ç»Ÿä¹‹é—´çš„ä¾èµ–ã€‚å‚è§ç¬¬ 4 æ¡ä¸­çš„ getAuthors ç¤ºä¾‹ã€‚</p><h2 id="è¦ç‚¹å›é¡¾" tabindex="-1">è¦ç‚¹å›é¡¾ <a class="header-anchor" href="#è¦ç‚¹å›é¡¾" aria-label="Permalink to &quot;è¦ç‚¹å›é¡¾&quot;">â€‹</a></h2><ul><li>é¿å…åœ¨å‘å¸ƒçš„ npm æ¨¡å—ä¸­å‡ºç°ä¼ é€’ç±»å‹ä¾èµ–ã€‚</li><li>ä½¿ç”¨ç»“æ„åŒ–ç±»å‹æ¥åˆ‡æ–­éå¿…è¦çš„ä¾èµ–ã€‚</li><li>ä¸è¦å¼ºè¿« JavaScript ç”¨æˆ·ä¾èµ– <code>@types</code>ï¼Œä¹Ÿä¸è¦å¼ºè¿« web å¼€å‘è€…ä¾èµ– Node.jsã€‚</li></ul>`,40)]))}const E=i(e,[["render",p]]);export{o as __pageData,E as default};
